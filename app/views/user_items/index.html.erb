<div class="regular-container" >
  <h3>Your Cart</h3>
  <div class="cart-container">
    <div style="border: 1px solid hsla(116, 0%, 81%, 1.00); padding: 24px; flex-grow: 2">
      <% @shopping_cart.order("created_at asc").each do |user_item| %>
        <div class="shopping-cart-card" data-quant="<%= user_item.quantity %>">
          <div>
            <%= cl_image_tag user_item.item.photo.key, crop: :fill, gravity: :center, size: "75x75", class: ""%>
          </div>
          <div style="flex-grow: 1; padding: 0px 16px;">
            <h5><%= user_item.item.name %></h5>
            <% unless user_item.options.length == 0 %>
            <p>Options:
              <% user_item.options.each do |option| %>
                <% itemOption = ItemOption.find(option) %>
                <%= itemOption.name %>
              <% end %>
              </p>
            <% end %>
            <% if user_item.special_instructions.length > 0 %>
              <p>Special Notes: <%= user_item.special_instructions %></p>
            <% end %>
          </div>

          <div>
            <p><strong>Quantity</strong></p>
            <div style="display: flex;">
              <form class="quantity-list" action="<%= updateQuantity_user_item_path(user_item) %>" method="POST">
                <input name="authenticity_token" value="<%= form_authenticity_token %>" type="hidden">
                <select name="modalQuantity">
                  <option class="quantity-form-option" value="1">1</option>
                  <option class="quantity-form-option" value="2">2</option>
                  <option class="quantity-form-option" value="3">3</option>
                  <option class="quantity-form-option" value="4">4</option>
                  <option class="quantity-form-option" value="5">5</option>
                  <option class="quantity-form-option" value="6">6</option>
                  <option class="quantity-form-option" value="7">7</option>
                  <option class="quantity-form-option" value="8">8</option>
                  <option class="quantity-form-option" value="9">9</option>
                  <option class="quantity-form-option" value="10">10</option>
                  <option class="quantity-form-option" value="11">11</option>
                  <option class="quantity-form-option" value="12">12</option>
                  <option class="quantity-form-option" value="13">13</option>
                  <option class="quantity-form-option" value="14">14</option>
                </select>
              </form>
              <p><%= link_to 'Delete', user_item_path(user_item), method: :delete, data: { confirm: "Are you sure?" }, html_input: { }, style: "padding-left: 8px; font-size: .8rem; text-decoration: underline" %></p>
            </div>
            <p>Subtotal: $<%= user_item.quantity * user_item.item.price %></p>
          </div>
        </div>
      <% end %>
    </div>

    <div class="checkout-section">
      <div class="checkout-section-flex">
        <div>
          <h5>Order Summary</h5>
          <h5>Item(s) Subtotal</h5>
          <h5>Order Total</h5>
        </div>

        <div>
          <h5><%= @shoppingCartQuantity %> items</h5>
          <h5><%= @shoppingCartPriceCounter %></h5>
          <h5><%= @shoppingCartPriceCounter %></h5>
        </div>
      </div>


          <% if current_user.user_items.where(state: "pending").length > 0 %>
          <%= form_tag orders_path do %>
        <!--     <%= hidden_field_tag "shopping_cart_total", @shopping_cart_total.to_i %> -->
            <%= submit_tag 'Next: Checkout', class: 'btn btn-primary', style: "width: 100%;" %>
          <% end %>
          <% else %>
          <h1>You have not added any items to your shopping cart!</h1>
          <% end %>

    </div>


    </div>
  </div>



<%= javascript_pack_tag 'shopping_cart' %>
